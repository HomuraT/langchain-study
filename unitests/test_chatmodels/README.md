# ChatModels æµ‹è¯•å¥—ä»¶

è¿™æ˜¯ä¸€ä¸ªå…¨é¢çš„ ChatOpenAI æ¨¡å‹æµ‹è¯•å¥—ä»¶ï¼Œä¸“æ³¨äºæµ‹è¯•åŸºäº `gpt-4o-mini` æ¨¡å‹çš„å„ç§åŠŸèƒ½å’Œåº”ç”¨åœºæ™¯ã€‚æœ¬æµ‹è¯•å¥—ä»¶æ¶µç›–äº†ä»åŸºç¡€èŠå¤©åˆ°é«˜çº§åŠŸèƒ½çš„å®Œæ•´æµ‹è¯•èŒƒå›´ï¼Œç¡®ä¿æ¨¡å‹åœ¨å„ç§å®é™…åº”ç”¨åœºæ™¯ä¸‹çš„å¯é æ€§å’Œç¨³å®šæ€§ã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å®‰è£…ä¾èµ–

```bash
# å®‰è£…æµ‹è¯•ä¾èµ–
pip install -r test_requirements.txt

# æˆ–ä½¿ç”¨ uv
uv pip install -r test_requirements.txt
```

### è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
pytest

# è¿è¡Œç‰¹å®šæµ‹è¯•æ–‡ä»¶
pytest test_basic_chat.py

# è¿è¡Œç‰¹å®šæµ‹è¯•ç±»
pytest test_basic_chat.py::TestBasicChat

# è¿è¡Œç‰¹å®šæµ‹è¯•æ–¹æ³•
pytest test_basic_chat.py::TestBasicChat::test_simple_chat
```

## ğŸ“‹ æµ‹è¯•åˆ†ç±»

### ğŸ”§ å•å…ƒæµ‹è¯•ï¼ˆUnit Testsï¼‰
ä½¿ç”¨ mock å“åº”ï¼Œä¸éœ€è¦çœŸå® APIï¼š

```bash
# è¿è¡Œæ‰€æœ‰å•å…ƒæµ‹è¯•
pytest -m "unit"

# æˆ–è€…è¿è¡Œé™¤é›†æˆæµ‹è¯•å¤–çš„æ‰€æœ‰æµ‹è¯•
pytest -m "not integration"
```

### ğŸŒ é›†æˆæµ‹è¯•ï¼ˆIntegration Testsï¼‰
éœ€è¦çœŸå®çš„æœ¬åœ° API æœåŠ¡ï¼š

```bash
# è¿è¡Œé›†æˆæµ‹è¯•ï¼ˆéœ€è¦æœ¬åœ°APIæœåŠ¡ï¼‰
pytest -m "integration"
```

### â±ï¸ æ€§èƒ½æµ‹è¯•ï¼ˆSlow Testsï¼‰
è€—æ—¶è¾ƒé•¿çš„æµ‹è¯•ï¼š

```bash
# è·³è¿‡æ…¢é€Ÿæµ‹è¯•
pytest -m "not slow"

# åªè¿è¡Œæ…¢é€Ÿæµ‹è¯•
pytest -m "slow"
```

### ğŸ”„ å¼‚æ­¥æµ‹è¯•ï¼ˆAsync Testsï¼‰
å¼‚æ­¥åŠŸèƒ½æµ‹è¯•ï¼š

```bash
# è¿è¡Œå¼‚æ­¥æµ‹è¯•
pytest -m "async_test"
```

## ğŸ¯ åŠŸèƒ½æµ‹è¯•è¯¦è§£

### 1. åŸºç¡€èŠå¤©åŠŸèƒ½ (`test_basic_chat.py`)

#### åŠŸèƒ½ä½œç”¨ä¸åº”ç”¨åœºæ™¯
åŸºç¡€èŠå¤©åŠŸèƒ½æ˜¯æ‰€æœ‰å¯¹è¯AIåº”ç”¨çš„æ ¸å¿ƒï¼Œä¸»è¦åŒ…æ‹¬ï¼š
- **æ¨¡å‹åˆå§‹åŒ–å’Œé…ç½®**: ç¡®ä¿æ¨¡å‹èƒ½å¤Ÿæ­£ç¡®é…ç½®å„ç§å‚æ•°ï¼ˆtemperatureã€max_tokensç­‰ï¼‰
- **ç®€å•å¯¹è¯**: å¤„ç†ç”¨æˆ·çš„åŸºç¡€è¯¢é—®ï¼Œæ˜¯æ‰€æœ‰èŠå¤©åº”ç”¨çš„åŸºæœ¬éœ€æ±‚
- **ç³»ç»Ÿæ¶ˆæ¯**: ä¸ºAIè®¾å®šè§’è‰²å’Œè¡Œä¸ºå‡†åˆ™ï¼Œå¸¸ç”¨äºå®¢æœæœºå™¨äººã€ä¸“ä¸šåŠ©æ‰‹ç­‰åœºæ™¯
- **å¤šè½®å¯¹è¯**: ä¿æŒå¯¹è¯ä¸Šä¸‹æ–‡ï¼Œå®ç°è¿ç»­å¯¹è¯ä½“éªŒ
- **å‚æ•°è°ƒä¼˜**: é€šè¿‡temperatureç­‰å‚æ•°æ§åˆ¶æ¨¡å‹çš„åˆ›é€ æ€§å’Œç¡®å®šæ€§

**å®é™…åº”ç”¨åœºæ™¯**:
- ğŸ“ æ™ºèƒ½å®¢æœç³»ç»Ÿï¼šå¤„ç†ç”¨æˆ·å’¨è¯¢å’Œé—®é¢˜è§£ç­”
- ğŸ“ åœ¨çº¿æ•™è‚²åŠ©æ‰‹ï¼šå›ç­”å­¦ç”Ÿé—®é¢˜ï¼Œæä¾›å­¦ä¹ æŒ‡å¯¼
- ğŸ¥ åŒ»ç–—å’¨è¯¢åŠ©æ‰‹ï¼šæä¾›åŸºç¡€å¥åº·ä¿¡æ¯ï¼ˆéœ€ä¸“ä¸šå®¡æ ¸ï¼‰
- ğŸ›’ ç”µå•†è´­ç‰©åŠ©æ‰‹ï¼šäº§å“æ¨èå’Œè´­ä¹°æŒ‡å¯¼
- ğŸ’¼ ä¼ä¸šå†…éƒ¨åŠ©æ‰‹ï¼šå‘˜å·¥é—®é¢˜è§£ç­”å’Œä¿¡æ¯æŸ¥è¯¢

**ç›¸å…³æµ‹è¯•æ ·ä¾‹**:
```python
# æ¨¡å‹åˆå§‹åŒ–æµ‹è¯•
def test_model_initialization() -> None:
    """æµ‹è¯•æ¨¡å‹çš„åŸºç¡€é…ç½®æ˜¯å¦æ­£ç¡®"""

# ç®€å•å¯¹è¯æµ‹è¯•  
def test_simple_chat() -> None:
    """æµ‹è¯•åŸºç¡€çš„é—®ç­”åŠŸèƒ½"""

# ç³»ç»Ÿæ¶ˆæ¯æµ‹è¯•
def test_system_message_chat() -> None:
    """æµ‹è¯•è§’è‰²è®¾å®šå’Œè¡Œä¸ºæŒ‡å¯¼"""

# å¤šè½®å¯¹è¯æµ‹è¯•
def test_multi_turn_conversation() -> None:
    """æµ‹è¯•ä¸Šä¸‹æ–‡ä¿æŒèƒ½åŠ›"""

# å‚æ•°é…ç½®æµ‹è¯•
def test_different_temperatures() -> None:
    """æµ‹è¯•ä¸åŒåˆ›é€ æ€§å‚æ•°çš„æ•ˆæœ"""

# æ‰¹å¤„ç†æµ‹è¯•
def test_batch_processing() -> None:
    """æµ‹è¯•åŒæ—¶å¤„ç†å¤šä¸ªå¯¹è¯è¯·æ±‚"""
```

### 2. å¼‚æ­¥æ“ä½œåŠŸèƒ½ (`test_async_operations.py`)

#### åŠŸèƒ½ä½œç”¨ä¸åº”ç”¨åœºæ™¯
å¼‚æ­¥æ“ä½œæ˜¯æ„å»ºé«˜æ€§èƒ½ã€é«˜å¹¶å‘AIåº”ç”¨çš„å…³é”®æŠ€æœ¯ï¼š
- **å¼‚æ­¥è°ƒç”¨**: éé˜»å¡å¼APIè°ƒç”¨ï¼Œæå‡åº”ç”¨å“åº”æ€§
- **å¹¶å‘å¤„ç†**: åŒæ—¶å¤„ç†å¤šä¸ªç”¨æˆ·è¯·æ±‚ï¼Œæé«˜ç³»ç»Ÿååé‡
- **å¼‚æ­¥æµå¼è¾“å‡º**: å®æ—¶å“åº”ç”¨æˆ·ï¼Œæ”¹å–„ç”¨æˆ·ä½“éªŒ
- **æ€§èƒ½ä¼˜åŒ–**: é€šè¿‡å¹¶å‘å‡å°‘æ€»ä½“å“åº”æ—¶é—´
- **èµ„æºç®¡ç†**: åˆç†åˆ©ç”¨ç³»ç»Ÿèµ„æºï¼Œé¿å…é˜»å¡

**å®é™…åº”ç”¨åœºæ™¯**:
- ğŸŒ é«˜å¹¶å‘Webåº”ç”¨ï¼šåŒæ—¶æœåŠ¡æ•°åƒç”¨æˆ·
- ğŸ“± ç§»åŠ¨åº”ç”¨åç«¯ï¼šå¿«é€Ÿå“åº”ç§»åŠ¨ç«¯è¯·æ±‚
- ğŸ¤– èŠå¤©æœºå™¨äººå¹³å°ï¼šå¤„ç†å¤šä¸ªå¯¹è¯ä¼šè¯
- ğŸ“Š æ•°æ®åˆ†æå¹³å°ï¼šæ‰¹é‡å¤„ç†åˆ†æè¯·æ±‚
- ğŸ® æ¸¸æˆAIï¼šå®æ—¶å“åº”ç©å®¶æ“ä½œ

**ç›¸å…³æµ‹è¯•æ ·ä¾‹**:
```python
# åŸºç¡€å¼‚æ­¥è°ƒç”¨
def test_basic_async_invoke() -> None:
    """æµ‹è¯•å¼‚æ­¥APIè°ƒç”¨åŠŸèƒ½"""

# å¼‚æ­¥æµå¼è¾“å‡º
def test_async_streaming() -> None:
    """æµ‹è¯•å¼‚æ­¥å®æ—¶å“åº”åŠŸèƒ½"""

# å¼‚æ­¥æ‰¹å¤„ç†
def test_async_batch_processing() -> None:
    """æµ‹è¯•å¼‚æ­¥æ‰¹é‡å¤„ç†èƒ½åŠ›"""

# å¹¶å‘è¯·æ±‚å¤„ç†
def test_async_concurrent_requests() -> None:
    """æµ‹è¯•åŒæ—¶å¤„ç†å¤šä¸ªè¯·æ±‚çš„èƒ½åŠ›"""

# æ€§èƒ½å¯¹æ¯”æµ‹è¯•
def test_async_performance_timing() -> None:
    """å¯¹æ¯”å¹¶å‘ä¸é¡ºåºæ‰§è¡Œçš„æ€§èƒ½å·®å¼‚"""

# æ“ä½œå–æ¶ˆæµ‹è¯•
def test_async_cancellation() -> None:
    """æµ‹è¯•å¼‚æ­¥æ“ä½œçš„ä¸­æ–­å’Œå–æ¶ˆ"""
```

### 3. æµå¼è¾“å‡ºåŠŸèƒ½ (`test_streaming.py`)

#### åŠŸèƒ½ä½œç”¨ä¸åº”ç”¨åœºæ™¯
æµå¼è¾“å‡ºæä¾›å®æ—¶å“åº”ä½“éªŒï¼Œè®©ç”¨æˆ·çœ‹åˆ°AI"æ€è€ƒ"çš„è¿‡ç¨‹ï¼š
- **å®æ—¶è¾“å‡º**: é€æ­¥æ˜¾ç¤ºç”Ÿæˆå†…å®¹ï¼Œå‡å°‘ç­‰å¾…æ„Ÿ
- **ç”¨æˆ·ä½“éªŒä¼˜åŒ–**: æ¨¡æ‹ŸçœŸå®å¯¹è¯çš„é€å­—æ˜¾ç¤ºæ•ˆæœ
- **é•¿å†…å®¹å¤„ç†**: å¯¹äºé•¿æ–‡æœ¬ç”Ÿæˆï¼Œç”¨æˆ·å¯ä»¥æå‰å¼€å§‹é˜…è¯»
- **å“åº”å¼è®¾è®¡**: æ”¯æŒä¸­æ–­å’Œå®æ—¶åé¦ˆ
- **å›è°ƒå¤„ç†**: è‡ªå®šä¹‰è¾“å‡ºå¤„ç†é€»è¾‘

**å®é™…åº”ç”¨åœºæ™¯**:
- ğŸ’¬ å³æ—¶èŠå¤©åº”ç”¨ï¼šæ¨¡æ‹ŸçœŸäººèŠå¤©çš„æ‰“å­—æ•ˆæœ
- âœï¸ å†…å®¹åˆ›ä½œå·¥å…·ï¼šå®æ—¶æ˜¾ç¤ºæ–‡ç« ã€ä»£ç ç”Ÿæˆè¿‡ç¨‹
- ğŸ“ å†™ä½œåŠ©æ‰‹ï¼šè®©ç”¨æˆ·çœ‹åˆ°AIçš„åˆ›ä½œæ€è·¯
- ğŸ­ åˆ›æ„æ•…äº‹ç”Ÿæˆï¼šå¢å¼ºäº’åŠ¨æ€§å’Œå¨±ä¹æ€§
- ğŸ” å®æ—¶æœç´¢é—®ç­”ï¼šè¾¹æœç´¢è¾¹æ˜¾ç¤ºç»“æœ

**ç›¸å…³æµ‹è¯•æ ·ä¾‹**:
```python
# åŸºç¡€æµå¼è¾“å‡º
def test_basic_streaming() -> None:
    """æµ‹è¯•åŸºæœ¬çš„æµå¼å“åº”åŠŸèƒ½"""

# ç³»ç»Ÿæ¶ˆæ¯æµå¼è¾“å‡º
def test_streaming_with_system_message() -> None:
    """æµ‹è¯•å¸¦è§’è‰²è®¾å®šçš„æµå¼è¾“å‡º"""

# å›è°ƒå¤„ç†å™¨
def test_streaming_callback_handler() -> None:
    """æµ‹è¯•è‡ªå®šä¹‰æµå¼è¾“å‡ºå¤„ç†é€»è¾‘"""

# æ•°æ®æ ¼å¼éªŒè¯
def test_streaming_chunk_format() -> None:
    """éªŒè¯æµå¼è¾“å‡ºæ•°æ®çš„æ­£ç¡®æ ¼å¼"""

# é•¿å†…å®¹å¤„ç†
def test_streaming_long_response() -> None:
    """æµ‹è¯•é•¿æ–‡æœ¬çš„æµå¼è¾“å‡ºæ•ˆæœ"""

# åŠŸèƒ½å¯¹æ¯”æµ‹è¯•
def test_streaming_vs_normal() -> None:
    """å¯¹æ¯”æµå¼ä¸æ™®é€šè¾“å‡ºçš„å·®å¼‚"""
```

### 4. é”™è¯¯å¤„ç†åŠŸèƒ½ (`test_error_handling.py`)

#### åŠŸèƒ½ä½œç”¨ä¸åº”ç”¨åœºæ™¯
å®Œå–„çš„é”™è¯¯å¤„ç†ç¡®ä¿åº”ç”¨åœ¨å„ç§å¼‚å¸¸æƒ…å†µä¸‹çš„ç¨³å®šæ€§ï¼š
- **ç½‘ç»œå¼‚å¸¸å¤„ç†**: åº”å¯¹ç½‘ç»œä¸ç¨³å®šã€è¿æ¥ä¸­æ–­ç­‰æƒ…å†µ
- **APIé”™è¯¯å¤„ç†**: å¤„ç†å¯†é’¥é”™è¯¯ã€æƒé™é—®é¢˜ç­‰APIç›¸å…³é”™è¯¯
- **è¶…æ—¶ç®¡ç†**: åˆç†è®¾ç½®è¶…æ—¶æ—¶é—´ï¼Œé¿å…é•¿æ—¶é—´ç­‰å¾…
- **èµ„æºé™åˆ¶**: å¤„ç†ä¸Šä¸‹æ–‡é•¿åº¦è¶…é™ã€é€Ÿç‡é™åˆ¶ç­‰é—®é¢˜
- **ä¼˜é›…é™çº§**: åœ¨å‡ºé”™æ—¶æä¾›å‹å¥½çš„ç”¨æˆ·ä½“éªŒ

**å®é™…åº”ç”¨åœºæ™¯**:
- ğŸŒ å…¨çƒåŒ–åº”ç”¨ï¼šåº”å¯¹ä¸åŒåœ°åŒºçš„ç½‘ç»œç¯å¢ƒå·®å¼‚
- ğŸ“± ç§»åŠ¨åº”ç”¨ï¼šå¤„ç†ç½‘ç»œåˆ‡æ¢ã€ä¿¡å·ä¸ç¨³å®šæƒ…å†µ
- ğŸ¢ ä¼ä¸šçº§åº”ç”¨ï¼šç¡®ä¿é«˜å¯ç”¨æ€§å’Œç¨³å®šæ€§
- â˜ï¸ äº‘æœåŠ¡é›†æˆï¼šå¤„ç†å„ç§äº‘æœåŠ¡çš„å¼‚å¸¸æƒ…å†µ
- ğŸ”’ å®‰å…¨æ•æ„Ÿåº”ç”¨ï¼šå¦¥å–„å¤„ç†æƒé™å’Œè®¤è¯é”™è¯¯

**ç›¸å…³æµ‹è¯•æ ·ä¾‹**:
```python
# ç½‘ç»œè¿æ¥é”™è¯¯
def test_connection_error() -> None:
    """æµ‹è¯•ç½‘ç»œè¿æ¥å¤±è´¥çš„å¤„ç†"""

# è®¤è¯é”™è¯¯å¤„ç†
def test_invalid_api_key_error() -> None:
    """æµ‹è¯•APIå¯†é’¥é”™è¯¯çš„å¤„ç†"""

# è¶…æ—¶é”™è¯¯å¤„ç†
def test_timeout_error() -> None:
    """æµ‹è¯•è¯·æ±‚è¶…æ—¶çš„å¤„ç†æœºåˆ¶"""

# èµ„æºé™åˆ¶é”™è¯¯
def test_context_length_exceeded_error() -> None:
    """æµ‹è¯•ä¸Šä¸‹æ–‡é•¿åº¦è¶…é™çš„å¤„ç†"""

# æµå¼ä¸­æ–­å¤„ç†
def test_streaming_interruption_error() -> None:
    """æµ‹è¯•æµå¼è¾“å‡ºä¸­æ–­çš„æ¢å¤"""

# ç³»ç»ŸéŸ§æ€§æµ‹è¯•
def test_network_resilience() -> None:
    """æµ‹è¯•ç³»ç»Ÿçš„ç½‘ç»œæ¢å¤èƒ½åŠ›"""

# é”™è¯¯æ¢å¤æµ‹è¯•
def test_error_recovery() -> None:
    """æµ‹è¯•ä»é”™è¯¯çŠ¶æ€æ¢å¤çš„èƒ½åŠ›"""
```

### 5. é«˜çº§åŠŸèƒ½ (`test_advanced_features.py`)

#### åŠŸèƒ½ä½œç”¨ä¸åº”ç”¨åœºæ™¯
é«˜çº§åŠŸèƒ½æ”¯æŒå¤æ‚çš„AIåº”ç”¨å¼€å‘éœ€æ±‚ï¼š
- **å·¥å…·è°ƒç”¨**: è®©AIèƒ½å¤Ÿè°ƒç”¨å¤–éƒ¨å‡½æ•°å’ŒAPIï¼Œæ‰©å±•èƒ½åŠ›è¾¹ç•Œ
- **ç»“æ„åŒ–è¾“å‡º**: è¿”å›æ ¼å¼åŒ–æ•°æ®ï¼Œä¾¿äºç¨‹åºå¤„ç†å’Œé›†æˆ
- **å¤šå·¥å…·ååŒ**: ç»„åˆå¤šä¸ªå·¥å…·å®Œæˆå¤æ‚ä»»åŠ¡
- **ä¸Šä¸‹æ–‡ç®¡ç†**: æ™ºèƒ½ç®¡ç†é•¿å¯¹è¯çš„ä¸Šä¸‹æ–‡ä¿¡æ¯
- **æ‰¹é‡å¤„ç†**: é«˜æ•ˆå¤„ç†å¤§é‡è¯·æ±‚

**å®é™…åº”ç”¨åœºæ™¯**:
- ğŸ§  æ™ºèƒ½åŠ©æ‰‹ï¼šé›†æˆæ—¥å†ã€é‚®ä»¶ã€å¤©æ°”ç­‰å¤šç§æœåŠ¡
- ğŸ“Š æ•°æ®åˆ†æï¼šè°ƒç”¨è®¡ç®—å·¥å…·ã€æ•°æ®åº“æŸ¥è¯¢ç­‰
- ğŸ› ï¸ å¼€å‘å·¥å…·ï¼šä»£ç ç”Ÿæˆã€æµ‹è¯•æ‰§è¡Œã€æ–‡æ¡£ç”Ÿæˆ
- ğŸª ç”µå•†å¹³å°ï¼šä»·æ ¼æŸ¥è¯¢ã€åº“å­˜æ£€æŸ¥ã€è®¢å•å¤„ç†
- ğŸ¯ å†³ç­–æ”¯æŒï¼šç»¼åˆå¤šä¸ªæ•°æ®æºè¿›è¡Œåˆ†æå†³ç­–

**ç›¸å…³æµ‹è¯•æ ·ä¾‹**:
```python
# å·¥å…·ç»‘å®šå’Œè°ƒç”¨
def test_tool_binding_and_calling() -> None:
    """æµ‹è¯•å•ä¸ªå·¥å…·çš„ç»‘å®šå’Œè°ƒç”¨"""

# å¤šå·¥å…·ååŒ
def test_multiple_tool_calls() -> None:
    """æµ‹è¯•åŒæ—¶è°ƒç”¨å¤šä¸ªå·¥å…·å®Œæˆä»»åŠ¡"""

# ç»“æ„åŒ–è¾“å‡ºè§£æ
def test_pydantic_tools_parser() -> None:
    """æµ‹è¯•ç»“æ„åŒ–æ•°æ®çš„è§£æå¤„ç†"""

# æ ¼å¼åŒ–è¾“å‡º
def test_structured_output_with_pydantic() -> None:
    """æµ‹è¯•è¿”å›ç‰¹å®šæ ¼å¼çš„ç»“æ„åŒ–æ•°æ®"""

# ä¸Šä¸‹æ–‡ä¿æŒ
def test_multi_turn_conversation_with_context() -> None:
    """æµ‹è¯•å¤æ‚å¯¹è¯ä¸­çš„ä¸Šä¸‹æ–‡ç®¡ç†"""

# å·¥å…·æ‰§è¡ŒéªŒè¯
def test_tool_execution() -> None:
    """éªŒè¯å·¥å…·çš„å®é™…æ‰§è¡Œæ•ˆæœ"""

# åˆ›é€ æ€§æ§åˆ¶
def test_temperature_and_creativity_effects() -> None:
    """æµ‹è¯•å‚æ•°å¯¹AIåˆ›é€ æ€§çš„å½±å“"""
```

## âš™ï¸ é…ç½®è¯´æ˜

### API é…ç½®

æµ‹è¯•ä½¿ç”¨ `src/config/api.py` ä¸­çš„ `local` é…ç½®ï¼š

```python
apis = {
    "local": {
        "base_url": "http://localhost:8212",
        "api_key": "sk-nsbaxS65nDJyGfA8wp5z7pbHxKUjEQBCpN5BKg7E19nLnOgL",
    }
}
```

### æ¨¡å‹é…ç½®

æ‰€æœ‰æµ‹è¯•ä½¿ç”¨ `gpt-4o-mini` æ¨¡å‹ï¼Œå…·ä½“å‚æ•°ï¼š

- **model**: `gpt-4o-mini`
- **temperature**: `0.7`ï¼ˆå¯é…ç½®ï¼‰
- **max_tokens**: `1000`ï¼ˆå¯é…ç½®ï¼‰
- **timeout**: `30`ç§’
- **max_retries**: `3`

## ğŸ”§ è‡ªå®šä¹‰é…ç½®

### ä¿®æ”¹æµ‹è¯•é…ç½®

ç¼–è¾‘ `conftest.py` ä¸­çš„ `test_config` fixtureï¼š

```python
@pytest.fixture(scope="session")
def test_config() -> dict:
    return {
        "model_name": "gpt-4o-mini",
        "temperature": 0.7,
        "max_tokens": 1000,
        "timeout": 30,
        "max_retries": 3
    }
```

### ä½¿ç”¨ä¸åŒçš„ API é…ç½®

åˆ›å»ºä¸´æ—¶é…ç½®ç”¨äºæµ‹è¯•ï¼š

```python
def test_with_custom_config():
    config = {
        "base_url": "http://alternative-server:8080",
        "api_key": "alternative-key"
    }
    model = ChatOpenAI(**config)
    # æµ‹è¯•...
```